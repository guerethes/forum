<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml"
	  th:include="layouts/admin :: page">

<body>
<div th:fragment="content">

	<div class="container" style="padding-top: 20px;">

		<div class="row">
			<div class="col-lg-8 col-md-8">

				<div class="post">
					<div class="topwrap">
						<div class="userinfo pull-left">
							<div class="avatar"> </div>
						</div>
						<div class="posttext pull-left">
							<h2 th:text="${post.title}"></h2>
							<p th:text="${post.post}"></p>
						</div>
						<div class="clearfix"></div>
					</div>
					<div class="postinfobot">
						<div class="posted pull-left"><i class="fa fa-clock-o"></i>  <span th:text="${'Posted on : ' + #dates.format(post.created, 'dd MMM @ hh:mm a') }"></span></div>
						<div class="clearfix"></div>
					</div>
				</div>

				<th:block th:each="answers : ${post.postThreadList}">
					<div class="post">
						<div class="topwrap">
							<div class="userinfo pull-left">
								<div class="avatar"> </div>
							</div>
							<div class="posttext pull-left">
								<p th:text="${answers.post}"></p>
							</div>
							<div class="clearfix"></div>
						</div>

						<div class="postinfobot">
							<div class="posted pull-left"><i class="fa fa-clock-o"></i>  <span th:text="${'Posted on : ' + #dates.format(answers.created, 'dd MMM @ hh:mm a') }"></span></div>
							<div class="clearfix"></div>
						</div>
					</div>
				</th:block>

				<!-- POST -->
				<div class="post">
					<form th:action="@{/post/save}" method="POST" class="form-horizontal form-label-left" novalidate>
						<input type="hidden" name="id" th:value="${post.id}" th:attr="name='thread.id'" />

						<div class="topwrap">
							<div class="userinfo pull-left">
								<div class="avatar"> </div>
							</div>
							<div class="posttext pull-left">
								<div class="textwraper">
									<div class="postreply">Post a Reply </div>
									<textarea name="reply" id="reply" th:field="*{thread.post}" placeholder="Type your message here"></textarea>
								</div>
							</div>
							<div class="clearfix"></div>
						</div>
						<div class="postinfobot">

							<div class="pull-right postreply">
								<div class="pull-left"><button type="submit" name="action" value="save" class="btn btn-primary">Post Reply</button></div>
								<div class="clearfix"></div>
							</div>

							<div class="clearfix"></div>
						</div>
					</form>
				</div>
			</div>

			<div sec:authorize="isAuthenticated()">
				<div class="col-lg-4 col-md-4">
					<div class="sidebarblock">
						<h3>My Active Threads</h3>
						<th:block th:each="thread : ${activeThreads}">
							<div class="divline"></div>
							<div class="blocktxt">
								<a th:href="@{/post/show/{type}(type=${thread.id})}" th:text="${thread.title}" title="Visualizar"></a>
							</div>
						</th:block>
					</div>
				</div>
			</div>

		</div>

	</div>

</div>
</body>

</html>